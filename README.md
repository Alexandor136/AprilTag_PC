# AprilTag Detection Project

## –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è AprilTags —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö IP-–∫–∞–º–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Modbus TCP –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –æ–±–ª–∞—Å—Ç–µ–π –∏–Ω—Ç–µ—Ä–µ—Å–∞ (ROI)

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –†–µ–∞–ª—å–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ AprilTags —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö RTSP-–∫–∞–º–µ—Ä
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö ROI –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞–º–µ—Ä—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Modbus TCP –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã: GUI –∏ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤
- –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

april_tag/
‚îú‚îÄ‚îÄ camera_utils/ # –ú–æ–¥—É–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ
‚îÇ ‚îú‚îÄ‚îÄ camera_operations.py
‚îÇ ‚îú‚îÄ‚îÄ camera_processing.py
‚îÇ ‚îî‚îÄ‚îÄ display_manager.py
‚îú‚îÄ‚îÄ network/ # –°–µ—Ç–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ ‚îú‚îÄ‚îÄ modbus_client.py
‚îÇ ‚îî‚îÄ‚îÄ modbus_handler.py
‚îú‚îÄ‚îÄ roi/ # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ROI (Region of Interest)
‚îÇ ‚îú‚îÄ‚îÄ read_roi.py
‚îÇ ‚îú‚îÄ‚îÄ setting_roi.py
‚îÇ ‚îî‚îÄ‚îÄ roi.xml
‚îú‚îÄ‚îÄ config.yaml # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ docker-compose.yml # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ main.py # GUI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ cli.py # –ö–æ–Ω—Å–æ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

1. **`camera_utils/`**  
   - –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–æ–º (–∑–∞—Ö–≤–∞—Ç, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–¥—Ä–æ–≤, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ).  
   - –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: –¥–µ—Ç–µ–∫—Ü–∏—è AprilTag –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.  

2. **`network/`**  
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Modbus (–æ–ø—Ä–æ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö).  

3. **`roi/`**  
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±–ª–∞—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞ (ROI) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.  
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `roi.xml`.  

4. **`config.yaml`**  
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–º–µ—Ä—ã, —Å–µ—Ç–∏, –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º.  

5. **`docker-compose.yml`**  
   - –ì–æ—Ç–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Docker (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å + –æ–±—Ä–∞–±–æ—Ç—á–∏–∫).  

6. **–ó–∞–ø—É—Å–∫:**  
   - GUI: `python3 main.py`  
   - CLI: `python3 cli.py`  
   - Docker: `docker-compose up` 

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞–º–µ—Ä—ã:
   - –î–æ–±–∞–≤—å—Ç–µ RTSP URL –≤ —Å–ø–∏—Å–æ–∫ `CAMERA_URLS` –≤ `main.py`.
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ ROI –¥–ª—è –∫–∞–º–µ—Ä—ã —Å –ø–æ–º–æ—â—å—é `setting_roi.py` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ `roi.xml`.

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `main.py` –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

3. –î–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–µ—Å–ª–∏ –∫–∞–º–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `reboot_ethernet_interface.py`.

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:
[2024-02-20 14:30:45] INFO –ö–∞–º–µ—Ä–∞ 1: –û–±–Ω–∞—Ä—É–∂–µ–Ω —Ç–µ–≥ ID=42
[2024-02-20 14:30:46] DEBUG Modbus: –∑–∞–ø–∏—Å—å 42 –≤ —Ä–µ–≥–∏—Å—Ç—Ä 1001

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

üê≥ Docker
bash
#–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker-compose build

#–ó–∞–ø—É—Å–∫
docker-compose up -d

#–û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
